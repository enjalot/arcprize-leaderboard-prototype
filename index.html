<head>
  <link rel="stylesheet" href="style.css">
</head>
<div class="container">
  <div class="item">
    <h1 class="center">ARC-AGI Leaderboard</h1>

    <div id="leaderboard-chart"></div>
    <div id="reusable-scatterplot-container"></div>
    
    <div style="display: flex; margin-top: 20px; justify-content: center; gap: 15px; max-width: 800px; margin-left: auto; margin-right: auto;">
      <div style="flex: 1;">
        <div style="text-align: left; margin-bottom: 8px; font-size: 0.8em; color: #707070;">Click to highlight</div>
        <!-- Prize Filter-->
        <div id="prize-filter" style="display: flex; flex-wrap: wrap; gap: 10px 15px;">
          <div id="all-version-filter" style="display: flex; align-items: center; white-space: nowrap; margin-bottom: 5px; cursor: pointer;">
            <svg width="20" height="20">
              <circle cx="10" cy="10" r="8" stroke="#808080" fill="none"></circle>
              <polygon points="10,2 18,18 2,18" stroke="#808080" fill="none"></polygon>
            </svg>
            <span style="margin-left: 10px; font-size: 0.85em;">All</span>
          </div>
          <div id="arc-agi-1-filter" style="display: flex; align-items: center; white-space: nowrap; margin-bottom: 5px; cursor: pointer;">
            <svg width="20" height="20">
              <circle cx="10" cy="10" r="8" fill="#808080"></circle>
            </svg>
            <span style="margin-left: 10px; font-size: 0.85em;">ARC-AGI-1</span>
          </div>

          <div id="arc-agi-2-filter" style="display: flex; align-items: center; white-space: nowrap; margin-bottom: 5px; cursor: pointer;">
            <svg width="20" height="20">
              <polygon points="10,2 18,18 2,18" fill="#808080"></polygon>
            </svg>
            <span style="margin-left: 10px; font-size: 0.85em;">ARC-AGI-2</span>
          </div>
        </div>
        <!-- Provider Filter -->
        <div id="provider-filter" style="display: flex; flex-wrap: wrap; gap: 10px 15px;">
          
        </div>
        <!-- Type Filter -->
        <div id="type-filter" style="display: flex; flex-wrap: wrap; gap: 10px 15px;">
        </div>

      </div>
      <div style="flex: 1;">
        <div style="margin-bottom: 10px; font-size: 0.8em; color: #707070;">Only systems which required less than $10,000 to run are shown. Notably missing from this chart is o3 (high compute). For more information on this see our <a style="color: #707070;" href="/blog/oai-o3-pub-breakthrough">announcement blog post</a>.</div>
      </div>
    </div>
  </div>
</div>


<div class="container" style="border-top: None;">
  <div class="item" style="padding-top: 0;">
    <h2>Understanding the Leaderboard</h2>
    <p>
      ARC-AGI has evolved from its first version (ARC-AGI-1) which measured basic fluid intelligence, to ARC-AGI-2 
      which challenges systems to demonstrate both high adaptability and high efficiency.
    </p>

    <p>
      The scatter plot above visualizes the critical relationship between cost-per-task and performance - a key 
      measure of intelligence efficiency. True intelligence isn't just about solving problems, but solving them 
      efficiently with minimal resources.
    </p>

    <h3>Interpreting the data</h3>
    <ul>
      <li>
        <strong>Human Performance</strong> solutions represent first-hand data collected by the Prize Foundation, 
        showing performance across different human groups including PhD graduates, PhD students, and members of the 
        general public. These data points establish important benchmarks for human-level problem-solving capabilities.
      </li>
      <li>
        <strong>Reasoning Systems Trend Line</strong> solutions display connected points representing the same 
        model at different reasoning levels. These trend lines illustrate how increased reasoning time affects 
        performance, typically showing asymptotic behavior as thinking time increases.
      </li>
      <li>
        <strong>Base LLMs</strong> solutions represent single-shot inference from standard language models 
        like GPT-4.5 and Claude 3.7, without extended reasoning capabilities. These points demonstrate raw model 
        performance without additional reasoning enhancements.
      </li>
      <li>
        <strong>Kaggle Systems</strong> solutions showcase competition-grade submissions from the Kaggle 
        challenge, operating under strict computational constraints ($50 compute budget for 120 evaluation tasks). 
        These represent purpose-built, efficient methods specifically designed for the ARC Prize.
      </li>
    </ul>
  
    <p>For more information on our reporting process, see our <a href="/policy">testing policy</a>.</p>
  </div>
  
</div>

<div class="container" style="border-top: None;">
  <div class="item" style="padding-top: 0;">
    <h2>Leaderboard Breakdown</h2>
    <div id="leaderboard-table"></div>
  </div>
</div>

<div class="container" style="border-top: None;">
  <div class="item" style="padding-top: 0;">
    <p class="gray"><small>&#42; ARC-AGI-2 score estimate based on partial testing results and o1-pro pricing.</small></p>
    <p class="gray"><small>&#42; &#42; Preview results: Results marked as preview are unofficial and may be based on incomplete testing. Models without available pricing information will not be shown on the efficiency chart. Results become official after complete testing is finished.</small></p>
  </div>
</div>

<script src="https://d3js.org/d3.v6.min.js"></script>
<script src="scripts/data.js"></script>
<script src="scripts/chart.js"></script>
<script src="scripts/leaderboard.js"></script>
<script src="scripts/leaderboard-table.js"></script>
<script>
  // Declare scatterplot in a broader scope
  let scatterplot;

  document.addEventListener('DOMContentLoaded', async function() {
    //track how long it takes to load the data
    const startTime = performance.now();
    const csvLocation = 'data/leaderboard.csv';
    const data = await loadData(csvLocation);
    console.log("DATA", data);
    const filteredData = filterData(data);
    console.log("FILTERED DATA", filteredData);
    const tidiedData = tidyData(filteredData);
    console.log("TIDIED DATA", tidiedData);

    // --- Instantiate the reusable chart ---
    scatterplot = reusableScatterplot()
      .modelGroups({
        "v1_Semi_Private": ["o3", "Claude_3_7_thinking", "o3-mini", "o1"]
      })
      .width(980) // Optional: Configure width
      .height(500) // Optional: Configure height
      .xAxisMin(0.001) // Adjust X axis min if needed
      .xAxisMax(1000)  // Adjust X axis max if needed (maybe less than 1000 for this example?)
      .yAxisMin(0)    // Initial Y min
      .yAxisMax(100) // Initial Y max

    // --- Select the container and call the chart function ---
    const chartContainer = d3.select('#reusable-scatterplot-container');

    // Initial render
    chartContainer
      .datum(tidiedData) // Pass the data using datum (or data if you expect multiple charts)
      .call(scatterplot); // Call the chart function


    // // Create the chart
    // createLeaderboardChart('leaderboard-chart', csvLocation, {
    //   // You can customize options here if needed
    //   title: "ARC-AGI-2  Leaderboard"
    // });

    createLeaderboardTable('leaderboard-table', csvLocation, {
      sortBy: 'performance',
      sortDirection: 'desc'
    });

    // --- Setup Filters ---
    const colorMapping = scatterplot.getColorMapping(); // Get colors from chart
    const defaultFilterColor = "#ffdc00ff"; // Match defaultColor in chart.js

    // Version Filters (existing)
    document.getElementById('all-version-filter').addEventListener('click', () => {
      if (scatterplot) {
        scatterplot.highlightPoints(tidiedData, 750);
      }
    });

    document.getElementById('arc-agi-1-filter').addEventListener('click', () => {
      if (scatterplot) {
        scatterplot.highlightPoints(tidiedData.filter(d => d.version == "ARC-AGI-1" && d.Provider !== "Human"), 750);
      }
    });

    document.getElementById('arc-agi-2-filter').addEventListener('click', () => {
      if (scatterplot) {
        scatterplot.highlightPoints(tidiedData.filter(d => d.version == "ARC-AGI-2" && d.Provider !== "Human"), 750);
      }
    });

    // Provider Filters (New)
    const providerFilterContainer = document.getElementById('provider-filter');
    const uniqueProviders = [...new Set(tidiedData.map(d => d.Provider).filter(p => p !== "Human"))]; // Exclude Human for filtering

    uniqueProviders.sort().forEach(provider => {
        const providerDiv = document.createElement('div');
        providerDiv.style.display = 'flex';
        providerDiv.style.alignItems = 'center';
        providerDiv.style.whiteSpace = 'nowrap';
        providerDiv.style.marginBottom = '5px';
        providerDiv.style.cursor = 'pointer';

        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("width", "20");
        svg.setAttribute("height", "20");

        const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rect.setAttribute("x", "2"); // Small padding
        rect.setAttribute("y", "2");
        rect.setAttribute("width", "16"); // Make it slightly smaller than svg
        rect.setAttribute("height", "16");
        rect.setAttribute("rx", "3"); // Rounded corners
        rect.setAttribute("fill", colorMapping[provider] || defaultFilterColor); // Use provider color

        svg.appendChild(rect);

        const span = document.createElement('span');
        span.style.marginLeft = '10px';
        span.style.fontSize = '0.85em';
        span.textContent = provider;

        providerDiv.appendChild(svg);
        providerDiv.appendChild(span);

        providerDiv.addEventListener('click', () => {
            if (scatterplot) {
                const providerData = tidiedData.filter(d => d.Provider === provider);
                scatterplot.highlightPoints(providerData, 750);
            }
        });

        providerFilterContainer.appendChild(providerDiv);
    });

    const endTime = performance.now();
    const loadTime = endTime - startTime;
    //console.log(`Data loaded in ${loadTime.toFixed(2)} milliseconds`);
  });
</script>